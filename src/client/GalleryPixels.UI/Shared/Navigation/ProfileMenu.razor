<div class="relative">
    <button 
        @onclick="ToggleMenu" 
        class="flex items-center space-x-1 px-3 py-1.5 text-sm text-on-surface dark:text-on-surface-dark hover:text-primary dark:hover:text-primary-dark transition-colors rounded-md @(_isOpen ? "bg-gray-100 dark:bg-gray-800" : "")">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        </svg>
        <span class="hidden sm:inline">Account</span>
        <svg class="w-4 h-4 transition-transform @(_isOpen ? "rotate-180" : "")" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
    </button>

    @if (_isOpen)
    {
        <div class="absolute right-0 mt-2 w-48 bg-surface dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-50">
            <div class="py-1">
                <a href="/profile" @onclick="CloseMenu" class="block px-4 py-2 text-sm text-on-surface dark:text-on-surface-dark hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                    Profile
                </a>
                <div class="border-t border-gray-200 dark:border-gray-700 my-1"></div>
                <div class="py-2">
                    <LogoutButton />
                </div>
            </div>
        </div>
    }
</div>

@code {
    private bool _isOpen;

    private void ToggleMenu()
    {
        _isOpen = !_isOpen;
    }

    private void CloseMenu()
    {
        _isOpen = false;
    }
}


